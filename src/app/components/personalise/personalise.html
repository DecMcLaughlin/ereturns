<div class="mt-1 mb-1 border-l-[5px] border-primary bg-white p-4 flex flex-row justify-between items-center">
  <div>
    <h1 class="text-2xl font-bold mb-4">
      Below is a list of Bulk Destruction Requests (based on your filters):
    </h1>
    <p>No filters saved.</p>
  </div>
  <div>
    <button
      type="button"
      (click)="toggleColumns()"
      pButton
      label="Personalize"
      icon="pi pi-user"
    ></button>
  </div>
</div>

@if (showPersonalize) {
  <div class="p-4 bg-white mb-4">
    <h2 class="text-xl font-semibold mb-2">Site preferences:</h2>
    <p class="mb-4">Below are the sites available.</p>
    <p class="mb-4">
      If you wish to make a particular site your default please click 'Make Default'.
    </p>

    <!-- Flex row container for all sites -->
    <div class="flex gap-4 bg-white p-4 rounded">
      @for (site of sites;  track $index) {
        <div class="flex items-center gap-4 bg-[#01a6884d] p-4 rounded shadow flex-1">
          @if (!site.default) {
            <!-- Slightly larger checkbox -->
            <input
              type="checkbox"
              [(ngModel)]="site.selected"
              class="form-checkbox h-6 w-6 text-[#0172A6]"
            />
          }

          <!-- Site Name -->
          <span class="flex-1 font-medium text-base">{{ site.name }}</span>

          @if (!site.default) {
            <!-- Slightly larger button -->
            <button
              (click)="makeDefault(site)"
              class="px-4 py-2 rounded text-white text-base"
              style="background-color: #0172A6"
            >
              Make Default
            </button>
          } @else {
            <!-- Slightly larger label -->
            <span
              class="px-4 py-2 rounded text-white text-base"
              style="background-color: #01a688"
            >
              Default
            </span>
          }
        </div>
      }
    </div>
  </div>
  <hr/>
  <div class="p-4 bg-white mb-4">
    <h2 class="text-xl font-semibold mb-2">Current Filtered Settings:</h2>
    <p class="mb-4">Below are the column(s) column filter(s) set as your preference.</p>
    <p class="mb-4">
      If you wish to re-order columns please drag and drop using the '...'
    </p>

    <!-- Flex row container for all sites -->
    <div  cdkDropList [cdkDropListData]="sortedColumns" (cdkDropListDropped)="drop($event)" class="flex gap-4 bg-white p-4 rounded">
      @for (col of sortedColumns; track $index) {
        <div cdkDrag class="flex flex-col items-start gap-4 bg-[#01a6884d] p-4 rounded shadow flex-1">
         <div class="flex items-center gap-4 w-full">
          @if (col.canBeHidden) {
            <!-- Slightly larger checkbox -->
            <input
              type="checkbox"
              [(ngModel)]="col.isVisible"
              class="form-checkbox h-6 w-6 text-[#0172A6]"
            />
          }

          <!-- Site Name -->
          <span class="flex-1 font-medium text-base">{{col.order }}.{{ col.header }}</span>
         </div>

            <!-- Slightly larger label -->
            <span
              class="px-4 py-2 rounded text-white text-base"
              style="background-color: #01a688"
            >
              **Showing All**
            </span>

        </div>
      }
    </div>
  </div>
}

